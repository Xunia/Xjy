<!-- TOC -->

- [概述](#概述)
    - [1. 优点](#1-优点)
    - [2. 反向代理](#2-反向代理)
    - [3. 负载均衡调度算法及状态设置](#3-负载均衡调度算法及状态设置)
    - [4. 模块划分](#4-模块划分)
    - [5. http模块](#5-http模块)

<!-- /TOC -->
## 概述
几种常见配置，其中包括：动静分离、缓存设置、负载均衡、反向代理、还有虚拟主机功能。

### 1. 优点  
1.保护了真实的web服务器的资源安全  
2.节约了有限的IP地址资源  
3.减少WEB服务器压力，提高响应速度
4.请求的统一控制，包括设置权限、过滤规则等；  
5.区分动态和静态可缓存内容；  
6.实现负载均衡，内部可以采用多台服务器来组成服务器集群，外部还是可以采用一个地址访问；  
7.解决Ajax跨域问题；  
8.作为真实服务器的缓冲，解决瞬间负载量大的问题；  


### 2. 反向代理
**反向代理**（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。

**正向代理是**一个位于客户端和原始服务器(origin server)之间的服务器。

### 3. 负载均衡调度算法及状态设置
Nginx的负载均衡模块目前支持4种调度算法：
* weight 轮询（默认）  
* ip_hash  
* fair //根据后端服务器的响应时间来分配请求，响应时间短的优先分配
* url_hash //使每个url定向到同一个后端服务器

负载均衡模块还可以设定每个后端服务器在负载均衡调度中的状态：  
* down，表示当前的server暂时不参与负载均衡。
* backup，预留的备份机器。当其他所有的非backup机器出现故障或者忙的时候，才会请求backup机器，因此这台机器的压力最轻。
* max_fails，允许请求失败的次数，默认为1。当超过最大次数时，返回proxy_next_upstream 模块定义的错误。
* fail_timeout，在经历了max_fails次失败后，暂停服务的时间。max_fails可以和fail_timeout一起使用。

### 4. 模块划分
核心模块：HTTP模块、EVENT模块和MAIL模块  
基础模块：HTTP Access模块、HTTP FastCGI模块、HTTP Proxy模块和HTTP Rewrite模块，  
第三方模块：HTTP Upstream Request Hash模块、Notice模块和HTTP Access Key模块。


Core(核心模块)：构建nginx基础服务、管理其他模块。  
Handlers（处理器模块）：此类模块直接处理请求，并进行输出内容和修改headers信息等操作。Handlers处理器模块一般只能有一个。  
Filters （过滤器模块）：此类模块主要对其他处理器模块输出的内容进行修改操作，最后由Nginx输出。  
Proxies （代理类模块）：此类模块是Nginx的HTTP Upstream之类的模块，这些模块主要与后端一些服务比如FastCGI等进行交互，实现服务代理和负载均衡等功能。

### 5. http模块
http模块可以说是最核心的模块了，它负责HTTP服务器相关属性的配置，它里面的server和upstream子模块